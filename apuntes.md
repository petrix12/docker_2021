# Curso completo de Docker de cero a experto
+ [URL del curso en Udemy](https://www.udemy.com/course/curso-completo-de-docker-de-cero-a-experto)
+ [URL del repositorio en GitHub](https://github.com/petrix12/docker_2021.git)
+ [Repositorio Joan Amengual](https://github.com/joaneeet7/Docker)

## Antes de iniciar:
1. Crear proyecto en la página de [GitHub](https://github.com) con el nombre: **docker_2021**.
    + **Description**: Proyecto para seguir los curso de Udemy de 'Curso completo de Docker de cero a experto' (Joan Amengual) y 'CRUD con PHP MySQL Bootstrap jQuery Ajax y Docker' (creado por Werner Ovalle).
    + **Public**.
2. En la ubicación raíz del proyecto en la terminal de la máquina local:
    + $ git init
    + $ git add .
    + $ git commit -m "Antes de iniciar"
    + $ git branch -M main
    + $ git remote add origin https://github.com/petrix12/docker_2021.git
    + $ git push -u origin main

## BLOQUE 0

### Sección 01: Introducción

#### 001. ¡Bienvenido al curso!
+ **Contenido**: Acerca del curso.
1. Commit Video 001:
    + $ git add .
    + $ git commit -m "001. ¡Bienvenido al curso!"
    + $ git push -u origin main

#### 002. ¿Cómo funciona el curso?
+ **Contenido**: Dinámica del curso.
1. Commit Video 002:
    + $ git add .
    + $ git commit -m "002. ¿Cómo funciona el curso?"
    + $ git push -u origin main

#### 003. No valores el curso antes de tiempo
+ **Contenido**: Sobre la valoración del curso.
1. Commit Video 003:
    + $ git add .
    + $ git commit -m "003. No valores el curso antes de tiempo"
    + $ git push -u origin main

#### 004. Repositorio de GitHub del curso
+ **Repositorio**: https://github.com/joaneeet7/Docker
1. Commit Video 004:
    + $ git add .
    + $ git commit -m "004. Repositorio de GitHub del curso"
    + $ git push -u origin main

#### 005. Conoce al instructor del curso
+ **Contenido**: Sobre el instructor del curso.
1. Commit Video 005:
    + $ git add .
    + $ git commit -m "005. Conoce al instructor del curso"
    + $ git push -u origin main

### Sección 02: Material adicional del curso

#### 006. LIBRO: Fundamentos esenciales de Docker
+ Libro de Docker: https://drive.google.com/file/d/1j-3O8S1tc2a1nphQBlq8voxi8e68WAwX/view
1. Commit Video 006:
    + $ git add .
    + $ git commit -m "006. LIBRO: Fundamentos esenciales de Docker"
    + $ git push -u origin main

## BLOQUE 1 - Background y fundamentos de Docker

### Sección 03: BLOQUE 1: Background y fundamentos de Docker

#### 007. BLOQUE 1: Background y fundamentos de Docker
+ **Nota del autor**:
    ```txt
    BLOQUE 1: Background y fundamentos de Docker
    ¡BIENVENIDO AL BLOQUE 1 DEL CURSO!

    En esta primera parte del curso nos vamos a centrar de lleno en entender los Fundamentos de Docker. De esta forma, veremos todo lo necesario para acabar siendo unos expertos en este maravilloso campo.

    ¡Espero que disfrutes esta parte del curso!
    ```
1. Commit Video 007:
    + $ git add .
    + $ git commit -m "007. BLOQUE 1: Background y fundamentos de Docker"
    + $ git push -u origin main

### Sección 04: El qué y el porqué de los contenedores

#### 008. ¿Qué es Docker?
+ **Contenido**: Sobre Docker.
1. Commit Video 008:
    + $ git add .
    + $ git commit -m "008. ¿Qué es Docker?"
    + $ git push -u origin main

#### 009. Arquitectura de Docker
+ **Docker Hub**: https://hub.docker.com
1. Commit Video 009:
    + $ git add .
    + $ git commit -m "009. Arquitectura de Docker"
    + $ git push -u origin main

#### 010. Docker vs Máquinas Virtuales (VMs)
+ **Contenido**: diferencias y similitudes de un contenedor y una máquina virtual.
1. Commit Video 010:
    + $ git add .
    + $ git commit -m "010. Docker vs Máquinas Virtuales (VMs)"
    + $ git push -u origin main

#### 011. Docker y contenedores
+ **Contenido**: sobre Docker y los contenedores.
1. Commit Video 011:
    + $ git add .
    + $ git commit -m "011. Docker y contenedores"
    + $ git push -u origin main

#### 012. La metáfora del transporte
+ **Contenido**: explicación de Docker a través de la metáfora del transporte.
1. Commit Video 012:
    + $ git add .
    + $ git commit -m "012. La metáfora del transporte"
    + $ git push -u origin main

#### 013. Docker: La Historia
+ **Contenido**: historia de Docker.
1. Commit Video 013:
    + $ git add .
    + $ git commit -m "013. Docker: La Historia"
    + $ git push -u origin main

#### 014. Microservicios y monolitos
+ **Contenido**: sobre monolitos y microservicios.
1. Commit Video 014:
    + $ git add .
    + $ git commit -m "014. Microservicios y monolitos"
    + $ git push -u origin main

#### 015. Docker: CI/CD y DevOps
+ **Contenido**: sobre CI/CD y DevOps.
1. Commit Video 015:
    + $ git add .
    + $ git commit -m "015. Docker: CI/CD y DevOps"
    + $ git push -u origin main

#### 016. Ventajas de los contenedores Docker
+ **Contenido**: sobre las ventajas de los contenedores Docker.
1. Commit Video 016:
    + $ git add .
    + $ git commit -m "016. Ventajas de los contenedores Docker"
    + $ git push -u origin main

### Sección 05: Instalación de Docker

#### 017. Instalación de Docker en Mac OS y Windows
+ Documetación instalación de Docker en Mac Os: https://docs.docker.com/desktop/mac/install
+ Documetación instalación de Docker en Windows: https://docs.docker.com/desktop/windows/install
1. Commit Video 017:
    + $ git add .
    + $ git commit -m "017. Instalación de Docker en Mac OS y Windows"
    + $ git push -u origin main

#### 018. Instalar Docker en Ubuntu
1. Documentación para instalar Docker en Ubuntu:
    + Oficial: https://docs.docker.com/engine/install/ubuntu
    + Hostinger: https://www.hostinger.es/tutoriales/como-instalar-y-usar-docker-en-ubuntu
2. Commit Video 018:
    + $ git add .
    + $ git commit -m "018. Instalar Docker en Ubuntu"
    + $ git push -u origin main

#### 019. Instalar Visual Studio Code (VSC)
+ Página VSC: https://code.visualstudio.com
1. Extensiones recomendadas:
    + Docker
        + Microsoft
        + Makes it easy to create, manage, and debug containerized applications.
2. Commit Video 019:
    + $ git add .
    + $ git commit -m "019. Instalar Visual Studio Code (VSC)"
    + $ git push -u origin main

### Sección 06: Primeros pasos con Docker

#### 020. Corriendo tu primera Imagen de Docker
1. Ejecutar (al ejecutar **run**, primero se ejecuta un **pull**):
    + $ docker run -d -e POSTGRES_PASSWORD=password postgres
    + $ docker images
    + $ docker ps
2. Commit Video 020:
    + $ git add .
    + $ git commit -m "020. Corriendo tu primera Imagen de Docker"
    + $ git push -u origin main

#### 021. Tags de las imágenes
1. Crear una imagen Postgres con el tag **bullseye**:
    + $ docker run -d -e POSTGRES_PASSWORD=password postgres:bullseye
2. Correr una imagen de Postgres en un contenedor personalizado:
    + $ docker run -d -e POSTGRES_PASSWORD=password --name bullseye_container postgres:bullseye
3. Commit Video 021:
    + $ git add .
    + $ git commit -m "021. Tags de las imágenes"
    + $ git push -u origin main

#### 022. Eliminar contenedores de Docker
1. Visualizar todos los contenedores (activos e inactivos):
    + $ docker ps -a
    + Salida:
        ```
        CONTAINER ID   IMAGE               COMMAND                  CREATED          STATUS                   PORTS                    NAMES
        b090d17b3a1a   postgres:bullseye   "docker-entrypoint.s…"   10 minutes ago   Up 10 minutes            5432/tcp                 bullseye_container
        a70be6beb9df   postgres:bullseye   "docker-entrypoint.s…"   13 minutes ago   Up 13 minutes            5432/tcp                 boring_perlman
        7aea0c7ae6fb   postgres            "docker-entrypoint.s…"   2 hours ago      Up 2 hours               5432/tcp                 admiring_germain
        592589e7665b   postgres            "docker-entrypoint.s…"   2 hours ago      Up 2 hours               5432/tcp                 relaxed_hopper
        bbdb76bace39   postgres            "docker-entrypoint.s…"   2 hours ago      Exited (1) 2 hours ago                            bold_montalcini
        214fd8544fc5   php:7.3-apache      "docker-php-entrypoi…"   6 days ago       Up 2 hours               0.0.0.0:80->80/tcp       docker-php
        a2dafaacc769   mysql:5.6           "docker-entrypoint.s…"   6 days ago       Up 2 hours               0.0.0.0:3306->3306/tcp   docker-mysql
        ```
2. Eliminar el contenedor cuyo **CONTAINER ID** es **bbdb76bace39**:
    + $ docker rm bbdb76bace39
    + **Nota 1**: para eliminar varios contenedores a la vez:
        + $ docker rm bbdb76bace39 bbdb76bace40 bbdb76bace50
    + **Nota 2**: también se puede eliminar un contenedor mediante su nombre:
        + $ docker rm bbdb76bace39 bbdb76bace40 nombre_contenedor
3. Eliminar contenedores activos:
    + $ docker rm -f docker-php docker-mysql
6. Commit Video 022:
    + $ git add .
    + $ git commit -m "022. Eliminar contenedores de Docker"
    + $ git push -u origin main

#### 023. Eliminar imágenes de Docker
1. Eliminar imagen:
    + $ docker rmi a70be6beb9df
2. Eliminar imagen de manera forzada:
    + $ docker rmi -f a70be6beb9df
    + **Nota**: si la imagen no se elimina, entonces habrá que eliminar primero el contenedor.
3. Commit Video 023:
    + $ git add .
    + $ git commit -m "023. Eliminar imágenes de Docker"
    + $ git push -u origin main

#### 024. Imagen de Ubuntu
1. Descargar la imagen de la últia versión de Ubuntu:
    + $ docker pull ubuntu
2. Ejecutar y observar:
    + $ docker images
    + $ docker ps
    + $ docker run -d ubuntu:rolling
    + $ docker images
    + $ docker ps -a
    + $ docker rmi -f 2dc51e04d744
3. Crear un contenedor a partir de la imagen de ubuntu:
    + $ docker run --name mi_ubuntu ubuntu
4. Ejecutar y observar:
    + $ docker ps -a
5. Eliminar las imagenes:
    + $ docker rm 92d0c33e00df 98be0aa0c4a8
6. Commit Video 024:
    + $ git add .
    + $ git commit -m "024. Imagen de Ubuntu"
    + $ git push -u origin main

#### 025. Reinicio de un contenedor de Docker
+ https://docs.docker.com/engine/reference/commandline/restart
1. Traer la imagen de postgres:bullseye:
    + $ docker pull postgres
2. Correr el contenedor de postgres:
    + $ docker run -d -e POSTGRES_PASSWORD=password postgres
3. Pausar el contenedor de postgres:
    + $ docker stop a59cf41b58bf
4. Reiniciar el contenedor de postgres:
    + $ docker start a59cf41b58bf
    + **Nota**: para eliminar un contenedor se acostumbra pararlo y luego eliminarlo:
        + $ docker start a59cf41b58bf
        + $ docker rm a59cf41b58bf
5. Descargar la última imagen oficial de redis:
    + $ docker pull redis
6. Levantar redis:
    + $ docker run -d redis
7. Reiniciar redis:
    + $ docker restart 0b867e635445
8.  Commit Video 025:
    + $ git add .
    + $ git commit -m "025. Reinicio de un contenedor de Docker"
    + $ git push -u origin main

#### 026. Ejecución de comandos dentro de un contenedor en ejecución
1. Levantar el servidor de postgres:
    + $ docker run -d -e POSTGRES_PASSWORD=password postgres
2. Ingresar a la terminal de postgres (el contenedor debe estar en ejecución):
    + $ docker exec -it a59cf41b58bf sh
3. Commit Video 026:
    + $ git add .
    + $ git commit -m "026. Ejecución de comandos dentro de un contenedor en ejecución"
    + $ git push -u origin main

#### 027. Visualizar los logs generados por el contenedor
+ https://docs.docker.com/engine/reference/commandline/logs
1. Realizar un docker logs al contenedor de postgres:
    + $ docker logs -f a59cf41b58bf
2. Realizar un docker logs con más detalle al contenedor de postgres:
    + $ docker logs -f --details a59cf41b58bf
    + $ docker logs -f --details -t a59cf41b58bf
    + $ docker logs -f --details --until=1s a59cf41b58bf
3. Commit Video 027:
    + $ git add .
    + $ git commit -m "027. Visualizar los logs generados por el contenedor"
    + $ git push -u origin main

#### 028. Eliminar múltiples contenedores
+ https://docs.docker.com/engine/reference/commandline/rm
1. Ver solo los id de los contenedores:
    + $ docker ps -q
2. Ver el tamaño de los contenedores:
    + $ docker ps -s
3. Eliminar todos los contenedores que esten parados:
    + $ docker rm $(docker ps --filter status=exited -q)
4. Parar todos los contenedores:
    + $ docker stop $(docker ps -q)
5. Commit Video 028:
    + $ git add .
    + $ git commit -m "028. Eliminar múltiples contenedores"
    + $ git push -u origin main

#### 029. Eliminar todas las imágenes creadas
+ https://docs.docker.com/engine/reference/commandline/rmi
1. Eliminar todas las imagenes:
    + $ docker stop $(docker ps -q)
    + $ docker rmi $(docker images -q)
2. Commit Video 029:
    + $ git add .
    + $ git commit -m "029. Eliminar todas las imágenes creadas"
    + $ git push -u origin main

#### 030. Búsqueda de imágenes desde la terminal
+ https://docs.docker.com/engine/reference/commandline/search
1. Buscar las imagenes de ubuntu desde la terminal:
    + $ docker search ubuntu
2. Buscar las 3 primeras imagenes de ubuntu desde la terminal:
    + $ docker search --limit 3 ubuntu
3. Buscar las imagenes de ubuntu que tengan más de 3 estrellas desde la terminal:
    + $ docker search --filter stars=40 ubuntu
4. Buscar las primeras 4 imagenes de ubuntu que tengan más de 3 estrellas desde la terminal:
    + $ docker search --filter stars=40 --limit 4 ubuntu
5. Buscar las imagenes oficiales de ubuntu desde la terminal:
    + $ docker search --filter is-official=true ubuntu
6. Commit Video 030:
    + $ git add .
    + $ git commit -m "030. Búsqueda de imágenes desde la terminal"
    + $ git push -u origin main

#### 031. Renombrar un contenedor
+ https://docs.docker.com/engine/reference/commandline/rename
1. Renombrar una imagen:
    + $ docker rename my_container my_new_container
2. Commit Video 031:
    + $ git add .
    + $ git commit -m "031. Renombrar un contenedor"
    + $ git push -u origin main

#### 032. Mostrar información de todo el sistema
+ https://docs.docker.com/engine/reference/commandline/info
1. Obtener toda la información del sistema:
    + $ docker info
2. Commit Video 032:
    + $ git add .
    + $ git commit -m "032. Mostrar información de todo el sistema"
    + $ git push -u origin main

#### 033. Guardar una imagen en un archivo comprimido
+ https://docs.docker.com/engine/reference/commandline/save
1. Ejecutar:
    + $ docker images
    + **Salida**:
    ```
    REPOSITORY   TAG       IMAGE ID       CREATED        SIZE
    redis        latest    aea9b698d7d1   2 weeks ago    113MB
    postgres     latest    e94a3bb61224   2 weeks ago    374MB
    ubuntu       latest    ba6acccedd29   2 months ago   72.8MB
    ```
2. Guardar la imagen de redis:
    + $ docker save redis:latest | gzip > myredis.tar.gz
3. Commit Video 033:
    + $ git add .
    + $ git commit -m "033. Guardar una imagen en un archivo comprimido"
    + $ git push -u origin main

#### 034. Importar imágenes procedentes de un archivo comprimido
+ https://docs.docker.com/engine/reference/commandline/load
1. Cargar una imagen guardada de redis:
    + $ docker load < myredis.tar.gz
2. Commit Video 034:
    + $ git add .
    + $ git commit -m "034. Importar imágenes procedentes de un archivo comprimido"
    + $ git push -u origin main

#### 035. Visualizar estadísticas de los contenedores
+ https://docs.docker.com/engine/reference/commandline/stats
1. Runear redis:
    + $ docker run -d redis
2. Ver información de los contenedores que estan corriendo:
    + $ docker stats
3. Commit Video 035:
    + $ git add .
    + $ git commit -m "035. Visualizar estadísticas de los contenedores"
    + $ git push -u origin main

### Sección 07: Creación de imágenes con Dockerfile

#### 036. ¿Qué es un Dockerfile?
+ **Repositorio GitHub**: https://github.com/joaneeet7/Docker
1. Descargar **app.zip**, descomprimir y ubicarse en la raíz del proyecto.
2. Archivo **app\Dockerfile**:
    ```Dockerfile
    FROM node:12.22.1-alpine3.11

    WORKDIR /app
    COPY . .
    RUN yarn install --production

    CMD ["node", "/app/src/index.js"]
    ```
    + Es una imagen personalizada.
3. Commit Video 036:
    + $ git add .
    + $ git commit -m "036. ¿Qué es un Dockerfile?"
    + $ git push -u origin main

#### 037. ¡Nuestra App usando Docker!
1. Ubicarse en la raíz del proyecto app.
    + $ cd app
2. Construir una imagen a partir del **Dockerfile**:
    + $ docker build -t my_app .
3. Para ver la imagen:
    + $ docker images
4. Runear un contenedor para la imagen creada:
    + $ docker run my_app
5. Runear el contenedor ahora exponiendo el puerto:
    + $ docker run -dp 3000:3000 my_app
6. Commit Video 037:
    + $ git add .
    + $ git commit -m "037. ¡Nuestra App usando Docker!"
    + $ git push -u origin main

#### 038. Funcionamiento de distintos contenedores en nuestra App
1. Realizar cambios en **my_app**.
2. Parar el contenedor:
    + $ docker stop 83848116dee7 fd03b7894bd5
3. Runear el contenedor ahora exponiendo el puerto:
    + $ docker run -p 3000:3000 my_app
    + **Información de la base de datos**: Using sqlite database at **/etc/todos/todo.db**
4. Crear un volumen de la base de datos en local:
    + $ docker run -v C:\xampp\htdocs\cursos\32Docker\app\etc:/etc/todos -dp 3000:3000 my_app
5. Commit Video 038:
    + $ git add .
    + $ git commit -m "038. Funcionamiento de distintos contenedores en nuestra App"
    + $ git push -u origin main

#### 039. Modificación de nuestra App
1. Crear un volumen de la aplicación de **my_app**:
    + $ docker stop 769d9e169bf8
    + $ docker run -v C:\xampp\htdocs\cursos\32Docker\app\etc:/etc/todos -dp 3000:3000 -v C:\xampp\htdocs\cursos\32Docker\app\src:/app/src my_app
2. Modificar **app\src\static\js\app.js** y observar que se reflejan los cambios.
3. Commit Video 039:
    + $ git add .
    + $ git commit -m "039. Modificación de nuestra App"
    + $ git push -u origin main

#### 040. Reconstrucción de la imagen de Docker
1. Parar contenedor:
    + $ docker stop 
2. Crear una nueva versión de **my_app**:
    + $ docker build -t my_app:v2 .
    + **Nota**: es importante estar ubicado en la carpeta en donde se encuentra el **Dockerfile**.
3. Commit Video 041:
    + $ git add .
    + $ git commit -m "040. Reconstrucción de la imagen de Docker"
    + $ git push -u origin main

#### 041. Publicación de nuestras imágenes en Docker Hub
+ https://docs.docker.com/engine/reference/commandline/login
+ https://docs.docker.com/engine/reference/commandline/logout
1. Crear tag de my_app v2:
    + $ docker tag 7585d626dad1 11639889/my_app:v2
    + **Nota**: los parámetros son:
        + 7585d626dad1: IMAGE ID
        + 11639889: ID de usuario de Docker Hub
        + my_app: aplicación
        + v2: tag de la aplicación
2. Publicar la imagen en Dockerhub:
    + $ docker push 11639889/my_app:v2
3. Commit Video 042:
    + $ git add .
    + $ git commit -m "041. Publicación de nuestras imágenes en Docker Hub"
    + $ git push -u origin main

### Sección 08: Fundamentos de Docker

#### 042. Tecnologías del entorno
1. Principales tecnologías del entorno de Docker:
    + Swarm
    + Compose
    + Machine
    + Registro de confianza de Docker
2. Commit Video 042:
    + $ git add .
    + $ git commit -m "042. Tecnologías del entorno"
    + $ git push -u origin main

#### 043. Cómo se construyen las imágenes
+ **Contenido**: explicación de como se construyen las imágenes.
1. Commit Video 043:
    + $ git add .
    + $ git commit -m "Cómo se construyen las imágenes"
    + $ git push -u origin main

#### 044. Capas de las imágenes
+ **Contenido**: sobre capas de las imágenes.
1. Commit Video 044:
    + $ git add .
    + $ git commit -m "Capas de las imágenes"
    + $ git push -u origin main

#### 045. Almacenamiento en caché
+ **Contenido**: sobre el almacenamiento en caché.
1. Commit Video 045:
    + $ git add .
    + $ git commit -m "Almacenamiento en caché"
    + $ git push -u origin main

#### 046. Imágenes base
+ **Contenido**: sobre imágenes base.
1. Commit Video 046:
    + $ git add .
    + $ git commit -m "Imágenes base"
    + $ git push -u origin main

#### 047. Instrucciones de Dockerfile
1. Principales instrucciones de Dockerfile:
   + ADD
   + CMD
   + COPY
   + ENTRYPOINT
   + ENV
   + FROM
   + MAINTAINER
   + ONBUILD
   + RUN
   + USER
   + VOLUME
   + WORKDIR
2. Commit Video 047:
    + $ git add .
    + $ git commit -m "Instrucciones de Dockerfile"
    + $ git push -u origin main

#### 048. Conectar los contenedores con el mundo
+ **Contenido**: sobre como conectar los contenedores con el mundo.
1. Commit Video 048:
    + $ git add .
    + $ git commit -m "Conectar los contenedores con el mundo"
    + $ git push -u origin main

#### 049. Vinculación de contenedores
+ **Contenido**: sobre vinculación de contenedores.
1. Commit Video 049:
    + $ git add .
    + $ git commit -m "Vinculación de contenedores"
    + $ git push -u origin main

#### 050. Gestión de datos con volúmenes y contenedores de datos
+ **Contenido**: sobre gestión de datos con volúmenes y contenedores de datos.
1. Commit Video 050:
    + $ git add .
    + $ git commit -m "Gestión de datos con volúmenes y contenedores de datos"
    + $ git push -u origin main

#### 051. Compartir datos
+ **Contenido**: sobre compartir datos.
1. Commit Video 051:
    + $ git add .
    + $ git commit -m "Compartir datos"
    + $ git push -u origin main

#### 052. Contenedores de datos
+ **Contenido**: sobre contenedores de datos.
1. Commit Video 052:
    + $ git add .
    + $ git commit -m "Contenedores de datos"
    + $ git push -u origin main

#### 053. Comandos de ejecución
1. Comandos de ejecución:
    + -a, --attach
    + -d, --detach
    + -i, --interactive
    + --restart
    + --rm
    + -t, --tty
    + -h, --hostname
    + --name NAME
    + -V, --volume
    + --volumes-from
    + --expose
    + --link
    + -p, --publish
    + -P, --publish-all
    + --entrypoint
    + -u, --user
2. Commit Video 053:
    + $ git add .
    + $ git commit -m "Comandos de ejecución"
    + $ git push -u origin main

#### 054. Gestión de contenedores
1. Principales comandos para gestión de contenedores:
    + docker attach [OPTIONS] container
    + docker create
    + docker cp
    + docker exec
    + docker kill
    + docker pause or unpause
    + docker restart
    + docker rm
    + docker start
    + docker stop
2. Commit Video 054:
    + $ git add .
    + $ git commit -m "Gestión de contenedores"
    + $ git push -u origin main

#### 055. Información sobre Docker
1. Principales comandos sobre información de Docker:
    + docker info
    + docker help
    + docker version
2. Commit Video 055:
    + $ git add .
    + $ git commit -m "Información sobre Docker"
    + $ git push -u origin main

#### 056. Información sobre el contenedor
1. Principales comandos sobre información de contenedores:
    + docker diff
    + docker events
    + docker inspect
    + docker logs
    + docker port
    + docker ps
    + docker top
2. Commit Video 056:
    + $ git add .
    + $ git commit -m "Información sobre el contenedor"
    + $ git push -u origin main

#### 057. Tratamiento de las imágenes
1. Principales comandos sobre tratamiento de las imágenes:
    + docker build
    + docker commit
    + docker export
    + docker history
    + docker images
    + docker import
    + docker load
    + docker rmi
    + docker save
    + docker tag
2. Commit Video 057:
    + $ git add .
    + $ git commit -m "Tratamiento de las imágenes"
    + $ git push -u origin main

#### 058. Utilización del registro
1. Principales comandos sobre la utilización del registro:
    + docker login
    + docker logout
    + docker pull
    + docker push
    + docker search
2. Commit Video 058:
    + $ git add .
    + $ git commit -m "Utilización del registro"
    + $ git push -u origin main

### Sección 09: Docker avanzado

#### 059. Plan de ataque
+ **Contenido**: sobre lo que haremos en esta sección.
1. Commit Video 059:
    + $ git add .
    + $ git commit -m "Plan de ataque"
    + $ git push -u origin main

#### 060. Multi container: Base de datos MYSQL
1. Crear directorio **multi-container**.
1. Ejecutar:
    + $ docker network create todo-app
    + $ docker run -d \
    + > --network todo-app --network-alias mysql \
    + > -v C:\\xampp\\htdocs\\cursos\\32Docker\\multi-container\\todo-mysql-data:/var/lib/mysql \
    + > -e MYSQL_ROOT_PASSWORD=secret \
    + > -e MYSQL_DATABASE=todos \
    + > mysql:5.7
2. Acceder al contenedor mysql:
    + $ docker exec -it aa97ab0f0239 mysql -p
    + Enter password: secret
    + mysql> show databases;
    + mysql> Ctrl+D              (para salir de MySQL)
3. Correr otro contenedor en la red creada **todo-app**:
    + $ docker run -it --network todo-app nicolaka/netshoot
4. Ejecutar:
    + 6fdbd51b876f  ~  dig mysql
5. Commit Video 060:
    + $ git add .
    + $ git commit -m "Multi container: Base de datos MYSQL"
    + $ git push -u origin main

#### 061. Multi container: Base de datos MYSQL y nuestra APP
1. Correr la imagen my_app:v2 (7585d626dad1):
    + $ docker run -dp 3000:3000 \
    + > --network todo-app \
    + > -e MYSQL_HOST=mysql \
    + > -e MYSQL_USER=root \
    + > -e MYSQL_PASSWORD=secret \
    + > -e MYSQL_DB=todos \
    + > my_app:v2
    + Nota: ahora **my_app** esta corriendo por: http://localhost:3000/
2. Para el contenedor my_app:v2 (d394d9961ece), luego reanudar y observar:
    + $ docker stop d394d9961ece
    + $ docker start d394d9961ece
3. Commit Video 061:
    + $ git add .
    + $ git commit -m "Multi container: Base de datos MYSQL y nuestra APP"
    + $ git push -u origin main

#### 062. Docker-compose: Simplificación del proceso
1. Parar todos los contenedores:
    + $ docker stop $(docker ps -q)
2. Crear archivo **multi-container\docker-compose.yaml**:
    ```yaml
    version: "3.7"

    services:

    # docker run -dp 3000:3000 \
    # --network todo-app \
    # -e MYSQL_HOST=mysql \
    # -e MYSQL_USER=root \
    # -e MYSQL_PASSWORD=secret \
    # -e MYSQL_DB=todos \
    # my_app:v2

    app:
        image: my_app:v2
        ports: 
        - 3000:3000
        environment:
        MYSQL_HOST: mysql
        MYSQL_USER: root
        MYSQL_PASSWORD: secret
        MYSQL_DB: todos
    
    # docker run -d \
    # --network todo-app --network-alias mysql \
    # -v C:\\xampp\\htdocs\\cursos\\32Docker\\multi-container\\todo-mysql-data:/var/lib/mysql \ 
    # -e MYSQL_ROOT_PASSWORD=secret \
    # -e MYSQL_DATABASE=todos \
    # mysql:5.7

    mysql:
        image: mysql:5.7
        volumes:
        - C:\\xampp\\htdocs\\cursos\\32Docker\\multi-container\\todo-mysql-data:/var/lib/mysql
        environment:
        MYSQL_ROOT_PASSWORD: secret
        MYSQL_DATABASE: todos
    ```
3. Levantar los contenedores en **multi-container\docker-compose.yaml** con compose:
    + $ cd multi-container
    + $ docker-compose up -d
4. Commit Video 062:
    + $ git add .
    + $ git commit -m "Docker-compose: Simplificación del proceso"
    + $ git push -u origin main

#### 063. docker-compose up vs docker-compose down
1. Parar todos los contenedores levantados con compose:
    + $ cd multi-container
    + $ docker-compose down
2. Eliminar todos los contenedores:
    + $ docker rm $(docker ps -a -q)
3. Commit Video 063:
    + $ git add .
    + $ git commit -m "docker-compose up vs docker-compose down"
    + $ git push -u origin main

#### 064. Más comandos de docker-compose
1. Ver los comandos de Docker compose:
    + $ docker-compose
2. Ejecutar:
    + $ cd multi-container
    + $ docker-compose up -d
    + $ docker ps
    + $ docker-compose ps
    + $ docker-compose stop app
    + $ docker-compose ps
    + $ docker-compose start app
    + $ docker-compose ps
3. Commit Video 064:
    + $ git add .
    + $ git commit -m "Más comandos de docker-compose"
    + $ git push -u origin main

## BLOQUE 2 - Ciclo de vida del software con Docker

### Sección 10: BLOQUE 2: Ciclo de vida del software con Docker

#### 065. BLOQUE 2: Ciclo de vida del software con Docker
+ **Contenido**: En esta segunda parte del curso nos vamos a centrar de lleno en entender el Ciclo de vida del Software con Docker.
1. Commit Video 065:
    + $ git add .
    + $ git commit -m "BLOQUE 2: Ciclo de vida del software con Docker"
    + $ git push -u origin main

### Sección 11: Usando Docker en desarrollo

#### 066. Plan de ataque
+ https://docs.docker.com/compose/gettingstarted
1. Crear carpeta **Bloque2\composetest** para empezar un nuevo proyecto.
2. Crear archivo **Bloque2\composetest\app.py**:
    ```py
    import time

    import redis
    from flask import Flask

    app = Flask(__name__)
    cache = redis.Redis(host='redis', port=6379)

    def get_hit_count():
        retries = 5
        while True:
            try:
                return cache.incr('hits')
            except redis.exceptions.ConnectionError as exc:
                if retries == 0:
                    raise exc
                retries -= 1
                time.sleep(0.5)

    @app.route('/')
    def hello():
        count = get_hit_count()
        return 'Hello World! I have been seen {} times.\n'.format(count)
    ```
3. Commit Video 066:
    + $ git add .
    + $ git commit -m "066. Plan de ataque"
    + $ git push -u origin main

#### 067. App de python con Flask y Redis
1. Comentar **Bloque2\composetest\app.py**:
    ```py
    # Importación de módulos
    import time
    import redis
    from flask import Flask

    # Uso de Flask
    app = Flask(__name__)

    # Instanciación de Redis
    cache = redis.Redis(host='redis', port=6379)

    # Función: realizar peticiones si el servicio de Redis no esta disponible
    # Bucle básico de reintentos que nos permite realizar peticiones varias veces
    # si el servicio de Redis no está disponible
    def get_hit_count():
        retries = 5
        while True:
            try:
                return cache.incr('hits')
            except redis.exceptions.ConnectionError as exc:
                if retries == 0:
                    raise exc
                retries -= 1
                time.sleep(0.5)


    @app.route('/')
    def hello():
        count = get_hit_count()
        return 'Hello World! I have been seen {} times.\n'.format(count)
    ```
2. Crear archivo **Bloque2\composetest\requirements.txt**:
    ```txt
    flask
    redis
    ```
3. Commit Video 067:
    + $ git add .
    + $ git commit -m "067. App de python con Flask y Redis"
    + $ git push -u origin main

#### 068. Creación del Dockerfile
1. Crear Bloque2\composetest\Dockerfile:
    ```
    FROM python:3.7-alpine

    # Creación de un directorio de trabajo en Docker
    WORKDIR /code

    # Variables de entorno de Flask
    ENV FLASK_APP=app.py 
    ENV FLASK_RUN_HOST=0.0.0.0

    # Ejecución
    RUN apk add --no-cache gcc musl-dev linux-headers

    # Instalación de dependencias
    COPY requirements.txt requirements.txt
    RUN pip install -r requirements.txt

    # Exposición de un puerto 
    EXPOSE 5000

    # Copiar todo el código
    COPY . .

    # Ejecución del código 
    CMD ["flask", "run"]
    ```
2. Commit Video 068:
    + $ git add .
    + $ git commit -m "068. Creación del Dockerfile"
    + $ git push -u origin main

#### 069. Uso de docker-compose
1. Crear **Bloque2\composetest\docker-compose.yaml**:
    ```yaml
    version: "3.9"

    services:
    # Primer servicio: WEB
    web:
    build: .
    ports: 
    - 5000:5000
    volumes:
    - .:/code
    environment:
        FLASK_ENV: development

    # Segundo servicio: Redis
    redis:
        image: "redis:alpine"
    ```
2. Levantar los servicios de **Bloque2\composetest\docker-compose.yaml**:
    + $ cd Bloque2\composetest
    + $ docker-compose up
3. Modificar **Bloque2\composetest\app.py**:
    ```py
    ≡
    @app.route('/about')
    def about():
        return '<h1>Soluciones++</h1>'
    ```
4. Ejecutar:
    + $ docker-compose down
5. Commit Video 069:
    + $ git add .
    + $ git commit -m "069. Uso de docker-compose"
    + $ git push -u origin main

### Sección 12: Logging

#### 070. Logging de Docker por defecto
1. Runear imagen de Debian con el nombre de **logtest**:
    + $ docker run --name logtest debian sh -c "echo stdout"
2. Ver los logs del contenedor:
    + $ docker logs -t logtest
3. Ejecutar:
    + $ docker run -d --name streamtest debian \
    + > sh -c 'while true; do echo "hola Solucionespp"; sleep 1; done;'
4. Ver los logs de streamtest:
    + $ docker logs -f streamtest
5. Eliminar todos los contenedores:
    + $ docker rm -f $(docker ps -a -q)
6. Commit Video 070:
    + $ git add .
    + $ git commit -m "070. Logging de Docker por defecto"
    + $ git push -u origin main

#### 071. Agregación de logs
+ **Contenido**: sobre agragación de logs.
3. Commit Video 071:
    + $ git add .
    + $ git commit -m "071. Agregación de logs"
    + $ git push -u origin main

#### 072. ELK (ElasticSearch, Logstash y Kibana)
+ **Contenido**: sobre ELK (ElasticSearch, Logstash y Kibana).
3. Commit Video 072:
    + $ git add .
    + $ git commit -m "ELK (ElasticSearch, Logstash y Kibana)"
    + $ git push -u origin main

#### 073. docker-compose para ELK
1. Crear carpeta **Bloque2\ELK** para nuevo proyecto.
2. Descargar archivo **titanic.csv** de los recursos del curso y ubicarlo en **Bloque2\ELK\titanic.csv**.
3. Crear archivo de configuración **Bloque2\ELK\ports.conf**:
    ```conf
    input{
        tcp{
            port => 5000
        }
    }

    output{
        elasticsearch{
            host => ["elasticsearch:9200"]
        }
    }
    ```
4. Crear el Docker Compose **Bloque2\ELK\docker-compose.yml**:
    ```yml
    version: '3.7'

    # ELK
    services:

    # Elasticsearch
    elasticsearch:
        image: elasticsearch:7.9.2
        ports:
           - '9200:9200'
        environment:
           - discovery.type=single-node
        ulimits:
        memlock:
            soft: -1
            hard: -1

    # Kibana
    kibana:
        image: kibana:7.9.2
        ports:
           - '5601:5601'

    # Logstash
    logstash:
        image: logstash:7.9.2
        ports:
           - '5000:5000'
        volumes:
          - type: bind
            source: .
            target: /usr/share/logstash/pipeline
            read_only: true
    ```
5. Commit Video 073:
    + $ git add .
    + $ git commit -m "073. docker-compose para ELK"
    + $ git push -u origin main

#### 074. Ejecución de ELK
1. Ejecutar:
    + $ cd Bloque2\ELK
    + $ docker-compose up -d
2. Ir a las siguientes direcciones y observar:
    + http://localhost:9200
    + http://localhost:9200/_cat
    + http://localhost:9200/_cat/healt
    + http://localhost:9200/_cat/indices
    + http://localhost:5601
3. Ir a **http://localhost:5601/app/ml#/filedatavisualizer** y subir **Bloque2\ELK\titanic.csv**.
4. Observar las estadísticas y luego presionar en **Import** y darle el nombre de **titanic**.
5. Presionando en **View index in Discover** se pueden realizar busquedas y observar mejor los registros.
1. Ejecutar:
    + $ cd Bloque2\ELK
    + $ docker-compose down
6. Commit Video 074:
    + $ git add .
    + $ git commit -m "074. Ejecución de ELK"
    + $ git push -u origin main

### Sección 13: Monitorización

#### 075. Monitorización con herramientas Docker
1. Ejecutar:
    + $ cd Bloque2\ELK
    + $ docker-compose up -d
    ```
    CONTAINER ID   IMAGE                 COMMAND                  CREATED          STATUS          PORTS
        NAMES
    25bdf39aca63   logstash:7.9.2        "/usr/local/bin/dock…"   21 seconds ago   Up 20 seconds   5044/tcp, 0.0.0.0:5000->5000/tcp, 9600/tcp   elk_logstash_1
    e8560ff3c955   kibana:7.9.2          "/usr/local/bin/dumb…"   21 seconds ago   Up 20 seconds   0.0.0.0:5601->5601/tcp
        elk_kibana_1
    7a7667724fa1   elasticsearch:7.9.2   "/tini -- /usr/local…"   21 seconds ago   Up 20 seconds   0.0.0.0:9200->9200/tcp, 9300/tcp
        elk_elasticsearch_1
    ```
    + $ docker stats 25bdf39aca63
    + $ docker stats e8560ff3c955
2. Inspeccionar todos los contenedores:
    + $ docker stats \
    + > $(docker inspect -f {{.Name}} $(docker ps -q))
3. Commit Video 075:
    + $ git add .
    + $ git commit -m "075. Monitorización con herramientas Docker"
    + $ git push -u origin main

#### 076. cAdvisor
+ https://hub.docker.com/r/google/cadvisor
1. Ejecutar:
    + $ docker run -d \
    + > --name cadvisor \
    + > -p 8080:8080 \
    + > google/cadvisor:latest
2. Ver Google cAdvisor en: http://localhost:8080/containers
3. Commit Video 076:
    + $ git add .
    + $ git commit -m "076. cAdvisor"
    + $ git push -u origin main

#### 077. Prometheus
+ **Contenido**: sobre Prometheus.
1. Commit Video 077:
    + $ git add .
    + $ git commit -m "077. Prometheus"
    + $ git push -u origin main

#### 078. Grafana
+ **Contenido**: sobre Grafana.
1. Commit Video 078:
    + $ git add .
    + $ git commit -m "078. Grafana"
    + $ git push -u origin main

#### 079. Construcción de Prometheus
1. Crear carpeta **Bloque2\monitor** para nuevo proyecto.
2. Crear archivo de configuración **Bloque2\monitor\prometheus\prometheus.yml**:
    ```yml
    global:
        scrape_interval:     15s
        evaluation_interval: 15s

    rule_files:
        # - "first.rules"
        # - "second.rules"

    scrape_configs:
       - job_name: prometheus
         static_configs:
           - targets: ['localhost:9090']
       - job_name: redis-exporter
         static_configs:
           - targets: ['redis-exporter:9121']
    ```
3. crear archivo **Bloque2\monitor\prometheus\docker-compose.yml**:
    ```yml
    version: '3'

    services:
        prometheus:
            image: prom/prometheus
            container_name: prometheus
            ports:
               - 9090:9090
            volumes:
               - ./prometheus.yml:/etc/prometheus/prometheus.yml:ro
            restart: unless-stopped
            networks: 
               - prometheus

    networks:
        prometheus:
            driver: bridge
            name: prometheus
    ```
4. Commit Video 079:
    + $ git add .
    + $ git commit -m "079. Construcción de Prometheus"
    + $ git push -u origin main

#### 080. Construcción de Grafana
1. Descargar **redis-dashboard-for-prometheus-redis-exporter-1-x_rev3.json** de los recursos y ubicarlos en **Bloque2\monitor\grafana\redis-dashboard-for-prometheus-redis-exporter-1-x_rev3.json**.
2. Crear **Bloque2\monitor\grafana\docker-compose.yml**:
    ```yml
    version: '3'

    services:
    grafana:
        image: grafana/grafana
        container_name: grafana
        ports:
           - 3000:3000
        restart: unless-stopped
    ```
3. Commit Video 080:
    + $ git add .
    + $ git commit -m "080. Construcción de Grafana"
    + $ git push -u origin main

#### 081. Redis & Redis exporter
1. Crear archivo **Bloque2\monitor\redis\docker-compose.yml**:
    ```yml
    version: '3'
    services:
    redis:
        image: redis:latest
        container_name: redis
        ports:
           - 6379:6379
        restart: unless-stopped
        networks:
           - redis

    networks:
        redis:
            driver: bridge
            name: redis
    ```
2. Crear archivo **Bloque2\monitor\redis-exporter\docker-compose.yml**:
    ```yaml
    version: '3'

    networks:
        redis:
            external:
                name: redis
        prometheus:
            external:
                name: prometheus

    services:
        redis-exporter:
            image: oliver006/redis_exporter
            container_name: redis-exporter
            ports: 
               - 9121:9121
            restart: unless-stopped
            environment:
                REDIS_ADDR: "redis:6379"
                REDIS_USER: null
                REDIS_PASSWORD: null
            networks:
               - redis
               - prometheus
    ```
3. Commit Video 081:
    + $ git add .
    + $ git commit -m "081. Redis & Redis exporter"
    + $ git push -u origin main

#### 082. Visualizar métricas en Prometheus
1. Levantar todos los servicios del proyecto **monitor**:
    + $ cd c:\xampp\htdocs\cursos\32Docker\Bloque2\monitor\prometheus
    + $ docker-compose up -d
    + $ cd c:\xampp\htdocs\cursos\32Docker\Bloque2\monitor\grafana
    + $ docker-compose up -d
    + $ cd c:\xampp\htdocs\cursos\32Docker\Bloque2\monitor\redis
    + $ docker-compose up -d
    + $ cd c:\xampp\htdocs\cursos\32Docker\Bloque2\monitor\redis-exporter
    + $ docker-compose up -d
2. Explorar métricas:
    + http://localhost:9090
    + http://localhost:9090/targets
3. Commit Video 082:
    + $ git add .
    + $ git commit -m "082. Visualizar métricas en Prometheus"
    + $ git push -u origin main

#### 083. Visualizar métricas en Grafana
1. Explorar:
    + http://localhost:3000/login
        + Email or username: admin
        + Password: admin
        + Remover todos los elementos.
        + Ir a configuración.
        + Seleccionar Promeheus:
            + URL: http://localhost:9090
            + Access: Browser
            + Presionar: Save & test
        + Regresar a Dashboard.
2. Commit Video 083:
    + $ git add .
    + $ git commit -m "083. Visualizar métricas en Grafana"
    + $ git push -u origin main

#### 084. Dashboard completo de redis en Grafana
1. Ir al dashboard de Grafana y presionar el icono **+** y seleccionar **import**:
    + $ http://localhost:3000/dashboard/import
    + Cargar: Bloque2\monitor\grafana\redis-dashboard-for-prometheus-redis-exporter-1-x_rev3.json
    + En **prom** seleccionar Prmetheus y presionar **Import**.
2. Commit Video 084:
    + $ git add .
    + $ git commit -m "084. Dashboard completo de redis en Grafana"
    + $ git push -u origin main

### Sección 14: Desplegando una DApp de Blockchain con Tokens NFT con Docker

#### 085. Plan de ataque
1. Ir al repositorio del curso **https://github.com/joaneeet7/Docker** y buscar el proyecto **Colores_docker** del Bloque 2 y ubicarlo en **Bloque2\Colores**.
3. Commit Video 085:
    + $ git add .
    + $ git commit -m "085. Plan de ataque"
    + $ git push -u origin main

#### 086. Creación del Dockerfile
1. Analizar el archivo Bloque2\Colores\Dockerfile:
    ```bat
    FROM node:12.13

    # Creación de un directorio de trabajo
    RUN echo "Creación del directorio de trabajo"
    WORKDIR /app

    # Volumen para la información
    RUN echo "Creación del volumen de información"
    VOLUME "$PWD":/app

    # Copiar los ficheros .json
    RUN echo "Copia de los ficheros .json"
    COPY package.json ./
    COPY package-lock.json ./

    # Ejecutar la instalación de los módulos
    RUN echo "Instalación de los módulos"
    RUN npm install

    # Exposición del puerto 3000
    EXPOSE 3000

    # Copiar todo el código 
    COPY . .

    # Ejecución de la DAPP
    CMD ["npm", "run", "start"]
    ```
2. Commit Video 086:
    + $ git add .
    + $ git commit -m "086. Creación del Dockerfile"
    + $ git push -u origin main

#### 087. Instalación de Metamask y Ganache
+ https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn
+ http://trufflesuite.com/ganache
1. Ejecutar Google Chrome e instalar la extensión **MetaMask**:
    + Presionar **Empezar** y luego en **Crear un cartera**.
    + Presionar en **Acepto** en Ayúdenos a mejorar MetaMask.
    + Establecer una contraseña.
    + Presionar en **Siguiente** (Secret Recovery Phrase).
2. Descargar en instalar [TRUFFLE SUITE](http://trufflesuite.com/ganache) y seleccionar **QUICKSTART**.
3. Regresar **MetaMask**:
    + Presionar en **Red principal de Etherum** y seleccionar **Agregar red**:
        + Nombre de la red: Ganache.
        + Nueva dirección URL de RPC: HTTP://127.0.0.1:7545
        + Identificador de cadena: 1337
4. **Nota**: para terminar de configurar la cuenta ver el video.
5. Commit Video 087:
    + $ git add .
    + $ git commit -m "087. Instalación de Metamask y Ganache"
    + $ git push -u origin main

#### 088. Construcción de la imagen y ejecución
1. Ejecutar:
    + $ cd c:\xampp\htdocs\cursos\32Docker\Bloque2\Colores
    + $ cat Dockerfile
    + $ docker build -t tokensnft .
    + $ docker run -dp 3000:3000 tokensnft      (Explorar: http://localhost:3000)
    + $ docker ps
    + $ docker images
        + Obtener el id de la imagen: a13fa127b605
    + $ docker tag a13fa127b605 11639889/tokensnft:v1
    + $ docker push 11639889/tokensnft:v1
2. Commit Video 088:
    + $ git add .
    + $ git commit -m "088. Construcción de la imagen y ejecución"
    + $ git push -u origin main

#### 089. Uso de la DApp con Tokens NFT
1. Ingresar dentro del contenedor **tokensnft**:
    + $ docker ps
        + Obtener el id del contenedor **tokensnft**: f1d4cbf56747
    + $ docker exec -it f1d4cbf56747 bash
2. Commit Video 089:
    + $ git add .
    + $ git commit -m "089. Uso de la DApp con Tokens NFT"
    + $ git push -u origin main

#### 090. Ventajas del uso de Docker para nuestra DAPP de Tokens NFT
+ **Contenido**: sobre las ventajas del uso de Docker.
1. Commit Video 090:
    + $ git add .
    + $ git commit -m "090. Ventajas del uso de Docker para nuestra DAPP de Tokens NFT"
    + $ git push -u origin main

#### 091. Monitorización de los contenedores
1. Ejecutar:
    + $ docker run -d --name cadvisor -p 8080:8080 google/cadvisor:latest
2. Explorar:
    + $ http://localhost:8080
3. Parar contenedor **tokensnft**:
    + $ docker ps
        + Obtener el id del contenedor **tokensnft**: f1d4cbf56747
    + $ docker stop f1d4cbf56747
4. Parar todos los contenedores:
    + $ docker stop $(docker ps -q)
5. Commit Video 091:
    + $ git add .
    + $ git commit -m "091. Monitorización de los contenedores"
    + $ git push -u origin main

### Sección 15: Automatización de Docker - Nivel experto

#### 092. Automatización de redis
+ https://parzibyte.me/blog/2020/12/30/instalar-make-windows/#Descargar_make
+ https://howtoinstall.co/es/make
+ https://conpilar.es/como-instalar-herramientas-de-linea-de-comandos-en-mac-os-x-sin-xcode
1. Descargar e instalar [Make](http://gnuwin32.sourceforge.net/packages/make.htm).
2. Registrar **C:\Program Files (x86)\GnuWin32\bin** como variable de entorno.
3. Crear carpeta para un nuevo proyecto **Bloque2\automatico**.
4. Crear archivo **Bloque2\automatico\Makefile**:
    ```Makefile
    # -----------------------------------
    # 1. CONSTRUCCIÓN DE REDIS
    # -----------------------------------

    # -----------------------------------
    # Construir una imagen de redis
    # Asignar un nombre el contenedor
    # Asignar un tag mediante variable
    # -----------------------------------

    # Variables
    REDIS_TAG=3
    REDIS_CONTAINER_NAME=redis
    REDIS_IMAGE_NAME=redis

    build_redis: ## Construcción y despliegue de redis
        @echo 'Construcción de redis con el TAG=$(REDIS_TAG)'
        docker pull $(REDIS_IMAGE_NAME):$(REDIS_TAG)
        @echo 'Ejecución de un contenedor de $(REDIS_IMAGE_NAME) con el nombre $(REDIS_CONTAINER_NAME)'
        docker run -d --name $(REDIS_CONTAINER_NAME) $(REDIS_IMAGE_NAME):$(REDIS_TAG)

    # -----------------------------------
    # Visualizar todas las imágenes de docker
    # Visualizar contenedores activos
    # Visualizar contenedores inactivos
    # -----------------------------------

    show_images_containers: ## Visualización de redis
        @echo 'Imágenes de docker'
        docker images -a
        @echo 'Contenedores en ejecución'
        docker ps --filter status=running
        @echo 'Contenedores fuera de ejecución'
        docker ps --filter status=exited

    # -----------------------------------
    # Eliminar el contenedor de redis
    # Visualizar de nuevo 
    # -----------------------------------

    delete_redis: ## Eliminación de redis
        @echo 'Parar redis'
        docker stop $(REDIS_CONTAINER_NAME)
        @echo 'Eliminación del contenedor $(REDIS_CONTAINER_NAME)'
        docker rm $(REDIS_CONTAINER_NAME)
        @echo 'Eliminación de la imagen $(REDIS_IMAGE_NAME)'
        docker rmi $(REDIS_IMAGE_NAME):$(REDIS_TAG)
        @echo 'Imágenes de docker'
        docker images -a
        @echo 'Verificación de la eliminación'
        docker ps -a
    ```
5. Eliminar todas las imagenes:
    + $ docker stop $(docker ps -q)
    + $ docker rmi -f $(docker images -q)
6. Para ejecutar las acciones establecidas en **Bloque2\automatico\Makefile**:
    + $ make build_redis
    + $ make show_images_containers
    + $ make delete_redis
7. Commit Video 092:
    + $ git add .
    + $ git commit -m "092. Automatización de redis"
    + $ git push -u origin main

#### 093. Automatización de la monitorización: Grafana, Prometheus y redis
1. Mover **Bloque2\monitor** a **Bloque2\automatico\monitor**.
2. Modificar archivo **Bloque2\automatico\Makefile**:
    ```Makefile
    ≡
    # -----------------------------------
    # 2. DESPLIEGUE DEL MONITOR
    # -----------------------------------

    # Construcción del monitor
    build_monitor_prometheus:
        @echo 'Construcción y despliegue de Prometheus'
        cd monitor/prometheus && docker-compose up -d

    build_monitor_grafana:
        @echo 'Construcción y despliegue de Grafana'
        cd monitor/grafana && docker-compose up -d

    build_monitor_redis:
        @echo 'Construcción y despliegue de redis'
        cd monitor/redis && docker-compose up -d

    build_monitor_redis_exporter:
        @echo 'Construcción y despliegue de redis-exporter'
        cd monitor/redis-exporter && docker-compose up -d

    build_monitor: ## Construcción del monitor
        @echo 'Contenedores en ejecución'
        docker ps -a 
        $(MAKE) build_monitor_prometheus
        $(MAKE) build_monitor_grafana
        $(MAKE) build_monitor_redis
        $(MAKE) build_monitor_redis_exporter
        @echo 'Contenedores en ejecución'
        docker ps -a 

    # Parar los servicios del monitor
    stop_monitor_prometheus:
        @echo 'Parar el servicio de Prometheus'
        cd monitor/prometheus && docker-compose stop prometheus

    stop_monitor_grafana:
        @echo 'Parar el servicio de Grafana'
        cd monitor/grafana && docker-compose stop grafana

    stop_monitor_redis:
        @echo 'Parar el servicio de redis'
        cd monitor/redis && docker-compose stop redis

    stop_monitor_redis_exporter:
        @echo 'Parar el servicio de redis'
        cd monitor/redis-exporter && docker-compose stop redis-exporter

    stop_monitor: ## Para la ejecución de los conetendores del monitor
        @echo 'Contenedores en ejecución'
        docker ps -a
        $(MAKE) stop_monitor_prometheus
        $(MAKE) stop_monitor_grafana
        $(MAKE) stop_monitor_redis
        $(MAKE) stop_monitor_redis_exporter
        @echo 'Contenedores en ejecución'
        docker ps -a

    # Eliminación de los servicios del monitor
    down_monitor_prometheus:
        @echo 'Parar el servicio de Prometheus'
        cd monitor/prometheus && docker-compose down prometheus

    down_monitor_grafana:
        @echo 'Parar el servicio de grafana'
        cd monitor/grafana && docker-compose down grafana

    down_monitor_redis:
        @echo 'Parar el servicio de redis'
        cd monitor/redis && docker-compose down redis

    down_monitor_redis_exporter:
        @echo 'Parar el servicio de redis-exporter'
        cd monitor/redis-exporter && docker-compose down redis-exporter

    down_monitor: ## Eliminación de los contenedores del monitor
        @echo 'Contenedores en ejecución'
        docker ps -a
        $(MAKE) down_monitor_prometheus
        $(MAKE) down_monitor_grafana
        $(MAKE) down_monitor_redis
        $(MAKE) down_monitor_redis_exporter
        @echo 'Contenedores en ejecución'
        docker ps -a

    # Proporciona ayuda
    .PHONY: help
    help: ## Comando de ayuda
        @fgrep -h "##" $(MAKEFILE_LIST) | fgrep -v fgrep | sed -e 's/\\$$//' | sed -e 's/##//'
    ```
3. Commit Video 093:
    + $ git add .
    + $ git commit -m "093. Automatización de la monitorización: Grafana, Prometheus y redis"
    + $ git push -u origin main

#### 094. Automatización de ELK
1. Mover **Bloque2\ELK** a **Bloque2\automatico\ELK**.
2. Modificar archivo **Bloque2\automatico\Makefile**:
    ```Makefile
    ≡
    # -----------------------------------
    # 3. DESPLIEGUE DE ELK
    # -----------------------------------

    build_elk: ## Construcción y despliegue de ELK
        @echo 'Construcción de ELK'
        cd ELK && docker-compose build
        @echo 'Despliegue de ELK'
        cd ELK && docker-compose up -d

    stop_elk: ## Parar los servicios ELK
        @echo 'Parar los servicios ELK'
        cd ELK && docker-compose stop

    start_elk: ## Encender los servicios ELK
        @echo 'Encender los servicios ELK'
        cd ELK && docker-compose start

    restart_elk: ## Reinicio de los servicios ELK
        @echo 'Reinicio de ELK'
        $(MAKE) stop_elk
        $(MAKE) start_elk
        docker ps

    # Variables
    ELASTICSEARCH_IMAGE=elasticsearch:7.9.2
    LOGSTASH_IMAGE=logstash:7.9.2
    KIBANA_IMAGE=kibana:7.9.2

    show: ## Mostrar imágenes y contenedores
        @echo 'Eliminación profunda de ELK'
        docker images -a 
        @echo 'Contenedores en ejecución'
        docker ps --filter status=running
        @echo 'Contenedores fuera de ejecución'
        docker ps --filter status=exited

    deep_delete: ## Eliminación profunda de ELK
        $(MAKE) show_elk
        @echo 'Eliminación de contenedores'
        cd ELK && docker-compose down 
        @echo 'Purgación de las imágenes'
        docker rmi $(ELASTICSEARCH_IMAGE) $(LOGSTASH_IMAGE) $(KIBANA_IMAGE)
        $(MAKE) show_elk
    ```
3. Commit Video 094:
    + $ git add .
    + $ git commit -m "094. Automatización de ELK"
    + $ git push -u origin main

#### 095. Automatización de la DApp de Blockchain con Tokens NFT
1. Mover **Bloque2\Colores** a **Bloque2\automatico\Colores**.
2. Modificar archivo **Bloque2\automatico\Makefile**:
    ```Makefile
    # -----------------------------------
    # 4. DESPLIEGUE DE LA DAPP BLOCKCHAIN
    # -----------------------------------

    # Variables
    DAPP_IMAGE=tokensnft
    DAPP_TAG=v1
    DAPP_CONTAINER_NAME=tokens_nft

    build_dapp: ## Construcción de la DAPP
        @echo 'Construcción de la DAPP'
        cd Colores && docker build -t $(DAPP_IMAGE):$(DAPP_TAG) .

    run_dapp: ## Despliegue de la DAPP
        @echo 'Despliegue de la DAPP'
        docker run -dp 3000:3000 --name $(DAPP_CONTAINER_NAME) $(DAPP_IMAGE):$(DAPP_TAG)

    stop_dapp: ## Parar la ejecución de la DApp
        @echo 'Parar la ejecución de la DApp'
        docker stop $(DAPP_CONTAINER_NAME)

    restart_dapp: ## Reinicio de la DApp
        @echo 'Reinicio de la DApp'
        docker restart $(DAPP_CONTAINER_NAME)

    delete_dapp: ## Eliminación del contenedor de la DAPP
        @echo 'Eliminación del contenedor de la DAPP'
        $(MAKE) stop_dapp
        docker rm $(DAPP_CONTAINER_NAME)
    ```
3. Commit Video 095:
    + $ git add .
    + $ git commit -m "095. Automatización de la DApp de Blockchain con Tokens NFT"
    + $ git push -u origin main

#### 096. Automatización de cAdvisor
1. Modificar archivo **Bloque2\automatico\Makefile**:
    ```Makefile
    ≡
    # -----------------------------------
    # 4. DESPLIEGUE DE CADVISOR
    # -----------------------------------

    CADVISOR_IMAGE=google/cadvisor
    CADVISOR_TAG=v0.33.0
    CADVISOR_CONTAINER=cadvisor_joan
    PATH_CADVISOR_IMAGE=C:\xampp\htdocs\cursos\32Docker\Bloque2\automatico

    build_cadvisor: ## Construcción y despliegue de cadvisor
        @echo 'Descarga de la imagen de $(CADVISOR_IMAGE)'
        docker pull $(CADVISOR_IMAGE):$(CADVISOR_TAG)
        @echo 'Ejecución de $(CADVISOR_IMAGE)'
        docker run -dp 8080:8080 --name $(CADVISOR_CONTAINER) $(CADVISOR_IMAGE):$(CADVISOR_TAG)

    save_cadvisor: ## Guarda la imagen de cAdvisor
        @echo 'Guarda la imagen de cAdvisor'
        docker save $(CADVISOR_IMAGE):$(CADVISOR_TAG) | gzip > $(PATH_CADVISOR_IMAGE)/cadvisor.tar.gz

    load_cadvisor: ## Carga de la imagen de cadvisor y ejecución
        @echo 'Carga de la imagen'
        docker load --input $(PATH_CADVISOR_IMAGE)/cadvisor.tar.gz
        @echo 'Ejecución de un contenedor para cAdvisor'
        docker run -dp 8080:8080 --name $(CADVISOR_CONTAINER) $(CADVISOR_IMAGE):$(CADVISOR_TAG)

    delete_cadvisor: ## Eliminación de contenedores y imagenes de cadvisor
        docker rm -f $(CADVISOR_CONTAINER)
        docker rmi $(CADVISOR_IMAGE):$(CADVISOR_TAG)
    ```
2. Commit Video 096:
    + $ git add .
    + $ git commit -m "096. Automatización de cAdvisor"
    + $ git push -u origin main

#### 097. Despliegue automático en Amazon Web Services (AWS)
3. Commit Video 097:
    + $ git add .
    + $ git commit -m ""
    + $ git push -u origin main

    ≡
    ```yml
    ```


## BLOQUE 3 - Herramientas y técnicas

### Sección 16: BLOQUE 3: Herramientas y técnicas

#### 098. BLOQUE 3: Herramientas y técnicas
3. Commit Video 098:
    + $ git add .
    + $ git commit -m ""
    + $ git push -u origin main

    ≡
    ```yml
    ```


### Sección 17: Descubrimiento de redes y servicios

#### 099. Introducción al descubrimiento de redes y servicios
3. Commit Video 09:
    + $ git add .
    + $ git commit -m ""
    + $ git push -u origin main

    ≡
    ```yml
    ```

#### 100. Ambassadors
6 min
#### 101. Creación de ambassadors
16 min
#### 102. Descubrimiento de servicios: etcd
7 min
#### 103. Descubrimiento de servicios: SkyDNS
3 min
#### 104. Implementación: etcd
12 min
#### 105. Implementación: SkyDNS
15 min
#### 106. Otras soluciones de descubrimiento de servicios
10 min
#### 107. Opciones de red
9 min

### Sección 18: 

#### 108. Introducción a la orquestación, clustering y gestión
9 min
#### 109. Docker Swarm
6 min
#### 110. Uso práctico de Docker Swarm
24 min
#### 111. Kubernetes
21 min
#### 112. Uso práctico de Kubernetes
15 min
#### 113. Swarm vs Kubernetes - ¿Cuál es mejor?
9 min

### Sección 19: 

#### 114. Cosas de las que preocuparse
8 min
#### 115. Defensa a fondo
7 min
#### 116. Segregar contenedores por host
4 min
#### 117. Aplicación de las actualizaciones
10 min
#### 118. Procedencia de la imagen
11 min
#### 119. Confianza en el contenido de Docker
14 min
#### 120. Dockerfiles reproducibles y de confianza
13 min
#### 121. Limitación de: Memoria, CPU, Reinicios, Sistemas de archivos y Capacidades
28 min

### Sección 20: 

#### 122. Fin del curso
7 min
#### 123. BONUS
1 min